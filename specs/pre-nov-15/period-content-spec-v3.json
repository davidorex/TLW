{"version":"2.0","model":"PeriodContent","inherits":"MetadataModel","module":"schoolcalendar.models.period_content","defaults_required":true,"fields":{"date":{"type":"DateField","db_index":true,"default":"timezone.now"},"period_number":{"type":"PositiveSmallIntegerField","db_index":true,"default":1},"template":{"type":"ForeignKey","to":"PeriodTemplate","on_delete":"PROTECT","default":"get_default_template"},"content_type":{"type":"CharField","max_length":10,"choices":[["CLASS","Class Session"],["MEETING","Meeting"],["EVENT","School Event"],["STUDY","Study Period"],["EXAM","Examination"],["DUTY","Staff Duty"],["OTHER","Other Activity"]],"db_index":true,"default":"OTHER"},"display_mode":{"type":"CharField","max_length":10,"choices":[["SCHEDULE","Schedule View"],["STANDALONE","Standalone View"]],"default":"SCHEDULE"},"priority":{"type":"PositiveSmallIntegerField","default":1,"db_index":true},"related_content_type":{"type":"ForeignKey","to":"ContentType","null":true,"blank":true,"on_delete":"CASCADE"},"related_object_id":{"type":"UUIDField","null":true,"blank":true},"content_object":{"type":"GenericForeignKey","fields":["related_content_type","related_object_id"]},"year_groups":{"type":"ManyToManyField","to":"YearGroup","blank":true},"homerooms":{"type":"ManyToManyField","to":"Homeroom","blank":true}},"methods":{"get_default_template":{"returns":"PeriodTemplate","logic":"return PeriodTemplate.objects.get_default()"}},"meta":{"ordering":["date","period_number","-priority"],"indexes":[["date","period_number"],["content_type","priority"]]},"methods":{"clean":{"validate":["period_number","content_type","access"]},"is_visible_to":{"params":["user"],"returns":"bool"},"resolve_conflicts":{"returns":"list"},"get_display_data":{"returns":"dict"}},"signals":{"pre_save":["validate_scheduling"],"post_save":["notify_users"]},"caching":{"keys":{"period_content":"content:date:{date}:period:{period}","user_schedule":"schedule:user:{user_id}:date:{date}","group_content":"content:group:{group_id}:date:{date}"}}}
