{"version":"2.0","model":"Quarter","inherits":"MetadataModel","module":"schoolcalendar.models.quarter","fields":{"term":{"type":"ForeignKey","to":"Term","on_delete":"CASCADE","related_name":"quarters","help":"Parent semester term","validators":["validate_semester_term"]},"quarter_type":{"type":"CharField","max_length":2,"choices":[["Q1","Quarter 1"],["Q2","Quarter 2"],["Q3","Quarter 3"],["Q4","Quarter 4"]],"db_index":true},"sequence":{"type":"PositiveSmallIntegerField","validators":[["MinValueValidator",1],["MaxValueValidator",2]],"db_index":true},"start_date":{"type":"DateField","db_index":true},"end_date":{"type":"DateField","db_index":true}},"meta":{"ordering":["term","sequence"],"unique_together":[["term","sequence"],["term","quarter_type"]],"indexes":[["start_date","end_date"],["term","sequence"]]},"validators":[{"name":"validate_semester_term","logic":"if not term.is_semester:raise ValidationError"}],"methods":{"clean":{"validate":["semester_term","dates","sequence"]},"get_week_number":{"params":["date"],"returns":"int"},"get_reporting_dates":{"returns":"dict"}},"signals":{"pre_save":["validate_term_type","validate_dates"]},"caching":{"keys":{"quarter_for_date":"quarter:date:{date}","term_quarters":"term:{term_id}:quarters"},"invalidate":["save","term_changes","metadata_updates"]},"metadata_schema":{"type":"object","properties":{"reporting_dates":{"type":"object","properties":{"grades_due":{"type":"string","format":"date"},"reports_published":{"type":"string","format":"date"},"parent_meetings":{"start":{"type":"string","format":"date"},"end":{"type":"string","format":"date"}}}},"assessment_weeks":{"type":"array","items":{"type":"object","properties":{"week_number":{"type":"integer"},"type":{"type":"string","enum":["formative","summative"]}}}}}},"tests":{"creation":{"validate_semester":true,"validate_dates":true,"validate_sequence":true},"reporting":{"dates_format":true,"assessment_weeks":true},"caching":{"invalidation":true,"race_conditions":true}}}
